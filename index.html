<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAZEN Alokasi Investasi</title>
    <style>
        :root {
            --clr-primary: #0033a0;
            --clr-secondary: #00c2ff;
            --clr-bg: #f7f9fc;
            --clr-text: #111827;
            --clr-muted: #6b7280;
            --radius: 12px;
            --space: clamp(1rem, 2vw, 2rem);
            --max-width: 1100px;
            --font-sans: 'Inter', sans-serif;
            --font-serif: 'Playfair Display', serif;
        }

        [data-theme="dark"] {
            --clr-bg: #0b1120;
            --clr-text: #e5e7eb;
            --clr-muted: #9ca3af;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: var(--font-sans);
            background: var(--clr-bg);
            color: var(--clr-text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3 { font-family: var(--font-serif); font-weight: 700; }
        h1 { font-size: clamp(2rem, 5vw, 3rem); }
        h2 { font-size: clamp(1.5rem, 4vw, 2.25rem); }
        h3 { font-size: clamp(1.25rem, 3vw, 1.75rem); }

        .container { width: 90%; max-width: var(--max-width); margin-inline: auto; padding: var(--space); }
        .grid { display: grid; gap: var(--space); }
        .section { margin-block: var(--space); }

        .topbar { background: var(--clr-primary); color: #fff; padding: .75rem 0; }
        .topbar .flex { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: var(--font-serif); font-size: 1.5rem; font-weight: 800; }
        .theme-toggle { background: none; border: 2px solid #fff; color: #fff; padding: .25rem .6rem; border-radius: var(--radius); cursor: pointer; }

        .hero { background: linear-gradient(135deg, var(--clr-primary) 0%, var(--clr-secondary) 100%); color: #fff; text-align: center; padding: clamp(3rem, 10vw, 6rem) 0; }
        .hero p { margin-top: 1rem; font-size: 1.125rem; opacity: .9; }

        .card { background: #fff; border-radius: var(--radius); box-shadow: 0 5px 20px rgba(0,0,0,.05); padding: var(--space); }
        [data-theme="dark"] .card { background: #141b2d; }

        .form-group { margin-bottom: 1.25rem; }
        label { display: block; font-weight: 600; margin-bottom: .5rem; }
        input, select { width: 100%; padding: .75rem 1rem; border: 2px solid #d1d5db; border-radius: var(--radius); transition: border-color .3s; }
        input:focus, select:focus { outline: none; border-color: var(--clr-secondary); }

        .instrument-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; }
        .instrument-card {
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all .3s ease;
        }
        .instrument-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,.08); }
        .instrument-card .icon { font-size: 2rem; margin-bottom: .5rem; }
        .instrument-card .name { font-weight: 600; font-size: .9rem; }
        .instrument-card.selected { border-color: var(--clr-primary); background: #e0f2fe; color: var(--clr-primary); }

        .option-card { display: flex; align-items: center; padding: 1rem; border: 2px solid #e5e7eb; border-radius: var(--radius); cursor: pointer; transition: all .3s; }
        .option-card:hover { border-color: var(--clr-secondary); background: #f0faff; }
        input[type=radio] { width: auto; margin-right: .75rem; }

        .btn { display: inline-flex; align-items: center; justify-content: center; background: var(--clr-primary); color: #fff; font-weight: 600; padding: .9rem 1.8rem; border: none; border-radius: var(--radius); cursor: pointer; transition: background .3s; }
        .btn:hover { background: #00277d; }

        #result { display: none; }
        .badge { display: inline-block; padding: .5rem 1.25rem; border-radius: 999px; font-weight: 700; font-size: 1rem; margin-bottom: 1rem; }
        .badge--conservative { background: #16a34a; color: #fff; }
        .badge--moderate { background: #f5c542; color: #111; }
        .badge--aggressive { background: #dc2626; color: #fff; }

        .allocation-grid { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
        .asset-box { text-align: center; padding: 1.25rem; border-radius: var(--radius); background: #fff; box-shadow: 0 3px 12px rgba(0,0,0,.06); }
        [data-theme="dark"] .asset-box { background: #1f2937; }
        .asset-box .icon { font-size: 2.25rem; margin-bottom: .5rem; }
        .asset-box .pct { font-size: 1.75rem; font-weight: 700; }
        .bar { height: 8px; background: #e5e7eb; border-radius: 4px; margin: .75rem 0; overflow: hidden; }
        .bar__fill { height: 100%; background: linear-gradient(90deg, var(--clr-primary), var(--clr-secondary)); }

        .result-summary {
            background: #f0faff;
            border-left: 4px solid var(--clr-secondary);
            padding: 1rem 1.25rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
        }
        .result-summary h3 { margin-bottom: .5rem; }
        .result-summary ul { list-style: none; padding-left: 0; margin-top: .75rem; }
        .result-summary li { margin-bottom: .25rem; }

        footer { background: #0b1120; color: #cbd5e1; font-size: .875rem; padding: 3rem 0 2rem; }
        footer h4 { color: #fff; margin-bottom: 1rem; font-family: var(--font-serif); }
        footer a { color: #94a3b8; text-decoration: none; }
        footer a:hover { color: var(--clr-secondary); }
        .footer__grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 2rem; }
        .socials { display: flex; gap: .75rem; margin-top: 1rem; }
        .socials a { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; background: rgba(255,255,255,.1); border-radius: 50%; }
        .footer__bottom { text-align: center; padding-top: 2rem; border-top: 1px solid #1f2937; font-size: .75rem; color: #64748b; }
    </style>
</head>
<body>
    <div class="topbar">
        <div class="container flex">
            <div class="logo">SAZEN</div>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">üåó</button>
        </div>
    </div>

    <header class="hero">
        <div class="container">
            <h1>Kalkulator Alokasi Investasi</h1>
            <p>Pilih instrumen investasi Anda dan dapatkan alokasi otomatis sesuai profil risiko ‚Äì oleh SAZEN Corp.</p>
        </div>
    </header>

    <main class="container grid">
        <section class="section">
            <div class="card">
                <h2>Informasi Dasar</h2>
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr))">
                    <div class="form-group">
                        <label for="fullName">Nama Lengkap</label>
                        <input id="fullName" placeholder="e.g. Andi Wijaya">
                    </div>
                    <div class="form-group">
                        <label for="monthlyIncome">Gaji/Uang Saku (Rp)</label>
                        <input id="monthlyIncome" placeholder="e.g. 2.000.000">
                    </div>
                    <div class="form-group">
                        <label for="investmentPeriod">Jangka Waktu</label>
                        <select id="investmentPeriod">
                            <option value="">Pilih</option>
                            <option value="1">&lt; 1 tahun</option>
                            <option value="2">1-3 tahun</option>
                            <option value="3">3-5 tahun</option>
                            <option value="4">5-10 tahun</option>
                            <option value="5">&gt; 10 tahun</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Pilih Instrumen Investasi:</label>
                    <div class="instrument-grid">
                        <div class="instrument-card" data-value="cash">
                            <div class="icon">üíµ</div>
                            <div class="name">Uang Tunai</div>
                        </div>
                        <div class="instrument-card" data-value="emergency">
                            <div class="icon">üöë</div>
                            <div class="name">Dana Darurat</div>
                        </div>
                        <div class="instrument-card" data-value="stocks">
                            <div class="icon">üìà</div>
                            <div class="name">Saham</div>
                        </div>
                        <div class="instrument-card" data-value="bonds">
                            <div class="icon">üèõÔ∏è</div>
                            <div class="name">Obligasi</div>
                        </div>
                        <div class="instrument-card" data-value="gold">
                            <div class="icon">ü•á</div>
                            <div class="name">Emas</div>
                        </div>
                        <div class="instrument-card" data-value="crypto">
                            <div class="icon">‚Çø</div>
                            <div class="name">Crypto</div>
                        </div>
                        <div class="instrument-card" data-value="mixFund">
                            <div class="icon">üìä</div>
                            <div class="name">Reksa-Dana Campuran</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="card">
                <h2>Profil Risiko (Jawab Minimal 3)</h2>

                <div class="form-group">
                    <h3>1. Reaksi jika portofolio turun 20% dalam sebulan?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q1" value="1"> Sangat panik dan segera menjual semua investasi</label>
                        <label class="option-card"><input type="radio" name="q1" value="2"> Khawatir tapi akan menunggu beberapa bulan</label>
                        <label class="option-card"><input type="radio" name="q1" value="3"> Tetap tenang dan melihat sebagai peluang beli</label>
                    </div>
                </div>

                <div class="form-group">
                    <h3>2. Berapa persentase maksimal kerugian yang bisa Anda terima?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q2" value="1"> Maksimal 5% - saya tidak suka rugi</label>
                        <label class="option-card"><input type="radio" name="q2" value="2"> 10-15% - wajar untuk investasi</label>
                        <label class="option-card"><input type="radio" name="q2" value="3"> 20%+ - tidak masalah untuk return tinggi</label>
                    </div>
                </div>

                <div class="form-group">
                    <h3>3. Pengalaman investasi Anda?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q3" value="1"> Pemula - baru mulai investasi</label>
                        <label class="option-card"><input type="radio" name="q3" value="2"> Menengah - sudah 2-5 tahun</label>
                        <label class="option-card"><input type="radio" name="q3" value="3"> Berpengalaman - lebih dari 5 tahun</label>
                    </div>
                </div>

                <div class="form-group">
                    <h3>4. Tujuan investasi utama?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q4" value="1"> Lindungi dari inflasi</label>
                        <label class="option-card"><input type="radio" name="q4" value="2"> Pertumbuhan moderat</label>
                        <label class="option-card"><input type="radio" name="q4" value="3"> Maksimalkan keuntungan</label>
                    </div>
                </div>

                <div class="form-group">
                    <h3>5. Toleransi volatilitas harian?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q5" value="1"> &lt; 1% - sangat stabil</label>
                        <label class="option-card"><input type="radio" name="q5" value="2"> 1-3% - masih nyaman</label>
                        <label class="option-card"><input type="radio" name="q5" value="3"> &gt; 3% - tidak masalah</label>
                    </div>
                </div>

                <div class="form-group">
                    <h3>6. Prioritas saat market crash?</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))">
                        <label class="option-card"><input type="radio" name="q6" value="1"> Jual semua & tunggu diposisi cash</label>
                        <label class="option-card"><input type="radio" name="q6" value="2"> Tahan & tidak tambah beli</label>
                        <label class="option-card"><input type="radio" name="q6" value="3"> Tambah posisi di harga rendah</label>
                    </div>
                </div>

                <button class="btn" onclick="calculateAllocation()">Analisis & Buat Alokasi</button>
            </div>
        </section>

        <section id="result" class="section"></section>
    </main>

    <footer>
        <div class="container grid footer__grid">
            <div>
                <h4>SAZEN Corp</h4>
                <p>Wealth-Tech Advisory untuk membantu Anda berinvestasi lebih cerdas.</p>
                <div class="socials">
                    <a href="#" aria-label="LinkedIn">in</a>
                    <a href="#" aria-label="Twitter">X</a>
                    <a href="#" aria-label="Instagram">ig</a>
                </div>
            </div>
            <div>
                <h4>Bantuan</h4>
                <ul style="list-style:none;padding:0">
                    <li><a href="#">Pusat Edukasi</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Kebijakan Privasi</a></li>
                    <li><a href="#">S&K</a></li>
                </ul>
            </div>
            <div>
                <h4>Hubungi Kami</h4>
                <p>Email: halo@sazen.co.id<br>WhatsApp: +62 811-2222-5555</p>
            </div>
        </div>
        <div class="footer__bottom">
            ¬© 2025 SAZEN Corp. All rights reserved.
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        const profiles = {
            conservative: {
                name: "Konservatif",
                badge: "badge--conservative",
                icon: "üõ°Ô∏è",
                desc: "Mengutamakan keamanan modal",
                allocation: {
                    cash: { name: "Uang Tunai", pct: 10, icon: "üíµ" },
                    emergency: { name: "Dana Darurat", pct: 15, icon: "üöë" },
                    bonds: { name: "Obligasi Negara", pct: 45, icon: "üèõÔ∏è" },
                    deposits: { name: "Deposito", pct: 20, icon: "üè¶" },
                    gold: { name: "Emas", pct: 10, icon: "ü•á" }
                },
                return: "6-8%",
                riskLevel: "Rendah"
            },
            moderate: {
                name: "Moderat",
                badge: "badge--moderate",
                icon: "‚öñÔ∏è",
                desc: "Keseimbangan keamanan & pertumbuhan",
                allocation: {
                    cash: { name: "Uang Tunai", pct: 5, icon: "üíµ" },
                    emergency: { name: "Dana Darurat", pct: 10, icon: "üöë" },
                    stocks: { name: "Saham", pct: 40, icon: "üìà" },
                    bonds: { name: "Obligasi", pct: 25, icon: "üèõÔ∏è" },
                    gold: { name: "Emas", pct: 10, icon: "ü•á" },
                    mixFund: { name: "Reksa-Dana Campuran", pct: 10, icon: "üìä" }
                },
                return: "8-12%",
                riskLevel: "Menengah"
            },
            aggressive: {
                name: "Agresif",
                badge: "badge--aggressive",
                icon: "üöÄ",
                desc: "Fokus pertumbuhan jangka panjang",
                allocation: {
                    cash: { name: "Uang Tunai", pct: 3, icon: "üíµ" },
                    emergency: { name: "Dana Darurat", pct: 7, icon: "üöë" },
                    stocks: { name: "Saham Growth", pct: 55, icon: "üöÄ" },
                    mixFund: { name: "Reksa-Dana Saham", pct: 20, icon: "üìä" },
                    crypto: { name: "Crypto", pct: 10, icon: "‚Çø" },
                    bonds: { name: "Obligasi", pct: 5, icon: "üèõÔ∏è" }
                },
                return: "12-15%",
                riskLevel: "Tinggi"
            }
        };

        const idr = n => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(n);
        const parse = s => Number(s.replace(/\D/g, ''));

        function getSelectedInstruments() {
            const selected = [];
            document.querySelectorAll('.instrument-card.selected').forEach(card => selected.push(card.dataset.value));
            return selected;
        }

        function calculateAllocation() {
            const name = document.getElementById('fullName').value.trim();
            const incomeEl = document.getElementById('monthlyIncome');
            const per = document.getElementById('investmentPeriod').value;
            const selected = getSelectedInstruments();

            if (!name || !incomeEl.value || !per || selected.length === 0) { alert('Lengkapi semua data & pilih minimal 1 instrumen'); return; }

            const income = parse(incomeEl.value);
            let score = 0;
            for (let i = 1; i <= 6; i++) {
                const a = document.querySelector(`input[name="q${i}"]:checked`);
                if (a) score += Number(a.value);
            }

            // Skor jangka waktu
            const periodScore = {
                "1": 0,
                "2": 0.5,
                "3": 1,
                "4": 1.5,
                "5": 2
            };
            score += periodScore[per];

            // Validasi minimal 3 jawaban
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            if (answered < 3) { alert('Jawab minimal 3 pertanyaan untuk hasil akurat!'); return; }

            let prof;
            if (score <= 8) prof = profiles.conservative;
            else if (score <= 14) prof = profiles.moderate;
            else prof = profiles.aggressive;

            const filtered = {};
            let totalPct = 0;
            for (const key of selected) {
                if (prof.allocation[key]) {
                    filtered[key] = prof.allocation[key];
                    totalPct += prof.allocation[key].pct;
                }
            }
            // normalisasi ke 100%
            for (const key in filtered) {
                filtered[key].pct = Math.round(filtered[key].pct * 100 / totalPct);
            }

            showResult(prof, income, name, filtered, score);
        }

        function showResult(prof, income, name, allocation, score) {
            // Jawaban keterangan
            const q1Text = ["", "Sangat panik dan segera menjual semua investasi", "Khawatir tapi akan menunggu beberapa bulan", "Tetap tenang dan melihat sebagai peluang beli"];
            const q2Text = ["", "Maksimal 5% - saya tidak suka rugi", "10-15% - wajar untuk investasi", "20%+ - tidak masalah untuk return tinggi"];
            const q3Text = ["", "Pemula - baru mulai investasi", "Menengah - sudah 2-5 tahun", "Berpengalaman - lebih dari 5 tahun"];
            const q4Text = ["", "Lindungi dari inflasi", "Pertumbuhan moderat", "Maksimalkan keuntungan"];
            const q5Text = ["", "&lt; 1% - sangat stabil", "1-3% - masih nyaman", "&gt; 3% - tidak masalah"];
            const q6Text = ["", "Jual semua & tunggu diposisi cash", "Tahan & tidak tambah beli", "Tambah posisi di harga rendah"];

            const q1 = document.querySelector('input[name="q1"]:checked')?.value;
            const q2 = document.querySelector('input[name="q2"]:checked')?.value;
            const q3 = document.querySelector('input[name="q3"]:checked')?.value;
            const q4 = document.querySelector('input[name="q4"]:checked')?.value;
            const q5 = document.querySelector('input[name="q5"]:checked')?.value;
            const q6 = document.querySelector('input[name="q6"]:checked')?.value;

            let html = `
                <div class="card">
                    <div class="risk-profile">
                        <h2>Halo, ${name}!</h2>
                        <span class="badge ${prof.badge}">${prof.icon} Profil ${prof.name}</span>
                        <p>${prof.desc}</p>
                    </div>

                    <div class="result-summary">
                        <h3>Maksimalkan Pertumbuhan sesuai Profil Risiko</h3>
                        <p><strong>Expected Return:</strong> ${prof.return} per tahun</p>
                        <p><strong>Risk Level:</strong> ${prof.riskLevel}</p>
                        <p><strong>Total Skor:</strong> ${score.toFixed(1)}</p>

                        <h4>Ringkasan Jawaban Profil Risiko:</h4>
                        <ul>
                            ${q1 ? `<li><strong>Reaksi turun 20%:</strong> ${q1Text[q1]}</li>` : ''}
                            ${q2 ? `<li><strong>Kerugian maksimal:</strong> ${q2Text[q2]}</li>` : ''}
                            ${q3 ? `<li><strong>Pengalaman:</strong> ${q3Text[q3]}</li>` : ''}
                            ${q4 ? `<li><strong>Tujuan utama:</strong> ${q4Text[q4]}</li>` : ''}
                            ${q5 ? `<li><strong>Toleransi volatilitas:</strong> ${q5Text[q5]}</li>` : ''}
                            ${q6 ? `<li><strong>Prioritas crash:</strong> ${q6Text[q6]}</li>` : ''}
                        </ul>
                    </div>

                    <h3>Alokasi Aset dari Gaji/Uang Saku</h3>
                    <div class="grid allocation-grid">`;
            for (const [k, a] of Object.entries(allocation)) {
                const alloc = income * a.pct / 100;
                html += `
                    <div class="asset-box">
                        <div class="icon">${a.icon}</div>
                        <div class="pct">${a.pct}%</div>
                        <div>${a.name}</div>
                        <div class="bar"><div class="bar__fill" style="width:${a.pct}%"></div></div>
                        <div style="font-weight:700">${idr(alloc)}</div>
                    </div>`;
            }
            html += `</div><button class="btn" onclick="downloadPDF()">üì• Unduh PDF</button></div>`;
            document.getElementById('result').innerHTML = html;
            document.getElementById('result').style.display = 'block';
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }

        async function downloadPDF() {
            const btn = document.querySelector('#result .btn');
            btn.style.display = 'none';
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            const res = document.getElementById('result');
            const canvas = await html2canvas(res, { scale: 2, useCORS: true });
            const imgData = canvas.toDataURL('image/png');
            const imgWidth = 190;
            const pageHeight = 295;
            const imgHeight = canvas.height * imgWidth / canvas.width;
            let heightLeft = imgHeight;
            let position = 10;
            pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;
            while (heightLeft >= 0) {
                position = heightLeft - imgHeight + 10;
                pdf.addPage();
                pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
            }
            const name = document.getElementById('fullName').value.trim() || 'Investor';
            pdf.save(`Alokasi-Investasi-${name}.pdf`);
            btn.style.display = 'inline-flex';
        }

        function toggleTheme() {
            const html = document.documentElement;
            const cur = html.getAttribute('data-theme');
            html.setAttribute('data-theme', cur === 'dark' ? 'light' : 'dark');
            localStorage.setItem('theme', html.getAttribute('data-theme'));
        }

        document.addEventListener('DOMContentLoaded', () => {
            const el = document.getElementById('monthlyIncome');
            el.addEventListener('input', e => {
                let v = e.target.value.replace(/\D/g, '');
                if (v) e.target.value = Number(v).toLocaleString('id-ID');
            });

            document.querySelectorAll('.instrument-card').forEach(card => {
                card.addEventListener('click', function () {
                    this.classList.toggle('selected');
                });
            });

            document.querySelectorAll('.option-card').forEach(card => {
                card.addEventListener('click', function () {
                    this.querySelector('input[type=radio]').checked = true;
                    document.querySelectorAll(`input[name="${this.querySelector('input').name}"]`).forEach(inp => {
                        inp.closest('.option-card').style.borderColor = '#e5e7eb';
                        inp.closest('.option-card').style.background = '#fff';
                    });
                    this.style.borderColor = 'var(--clr-secondary)';
                    this.style.background = '#f0faff';
                });
            });
        });
    </script>
</body>
</html>
